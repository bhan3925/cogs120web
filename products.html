<!DOCTYPE html>
<html>
  <head>
    <title>Fade</title>
  </head>
  <body>
    <button onclick="goBack()">Go Back</button>

    <script>
    function goBack() {
        window.history.back();
    }
    </script>
    <h1>Products to Consider<h1>
    <p></p>

    <script id="entry-template" type="text/x-handlebars-template">
      <div class="project" id="project{{index}}">
        <fieldset>
          <img src="{{image}}" alt="Lorem Pixel image" class="img" height="150" width="150">
          <p><h4>{{name}}</h4></p>
          <p>
            <h5>{{description}}</h5>
          </p>
          <form action="{{link}}">
            <input type="submit" value="Details" />
          </form>
        </fieldset>
      </div>
    </script>

    <div id="templatedProjects">
        <!-- we will inject templated project HTML code into here -->
    </div>



  </body>

  <script src="handlebars-v4.0.12.js"></script>
  <script src="https://code.jquery.com/jquery.js"></script>

  <script>
    //used to get the response from previous page and then populate the handle bars thing
    function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
      vars[key] = value;
    });
    return vars;
    }
    var style = getUrlVars()["style"];
    console.log(style);

    //hair style data
    var complexData = [
    {'name': 'Gatsyby Moving Rubber', 'link': 'https://amazon.com/gatsby', 'index': 1, 'description': 'good for asian hair!', styles:['Cropped+Fringe','undercut'] }]


    $(document).ready(function() {
      console.log('hello world');

      // compile the template
      var source   = $("#entry-template").html();
      var template = Handlebars.compile(source);
      var parentDiv = $("#templatedProjects");

      // now iterate through the complexData list and keep appending:
      for (var i = 0; i < complexData.length; i++) {
        var curData = complexData[i];
        for(var x=0; x<curData['styles'].length;x++){
          if(curData['styles'][x] == style){
            var curHtml = template(curData);
            parentDiv.append(curHtml);
          }
        }

      }
    });


  </script>





</html>
